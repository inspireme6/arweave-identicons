<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="description" content="Create your own identicon and upload it to Arweave. Use it across other permaweb apps.">
		<meta name="author" content="inspireme6">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		
		<title>Arweave.Identicons</title>

		<script src="https://unpkg.com/arweave/bundles/web.bundle.min.js"></script>
		<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css">
		<link rel="shortcut icon" type="image/png" href="img/identicon.png"/>
		
		<script src="js/pnglib.js"></script>
		<script src="js/identicon.js"></script>
		<script src="js/sha.js"></script>
		
		<style type="text/css">
			html {
			  height: 100%;
			}
			body {
			  position: relative;
			  margin: 0;
			  min-height: 100%;
			}
			.file-input{
				height: 200px;
				border: 2px dashed #62666f;
				text-align: center;
				display: flex;
				align-items: center;
				justify-content: center;
				position: relative;
				margin: auto;
				max-width: 300px;
			}
			.file-input input[type=file]{
				opacity: 0;
				position: absolute;
				background: none;
				width: 100%;
				height: 100%;
			}
			.clickable {
				cursor: pointer;
			}
			footer {
				position: absolute;
				right: 0;
				bottom: 0;
				left: 0;
				background-color: #efefef;
				text-align: center;				
			}
			@media screen and (max-width: 767px) {
				h1 {
					font-size: 24px;
				}
			}
		</style>
	</head>
	<body>
		<div id="about" class="container content-section">
			<div class="row text-center justify-content-center mt-3">
				<div class="col-lg-6 text-center">
					<div class="pb-2 mt-4 mb-2 border-bottom">
						<img id="idicon" width="40px" src="img/identicon.png">
						<h1 class="text-center">Arweave.Identicons</h1>
						<a data-toggle="collapse" href="#collapseOne">What's an identicon?</a>
						<div class="collapse" id="collapseOne">
							An Identicon is a avatar which represents a hash of unique information.
						</div>
						<div id="ar-address" style="display: none; word-wrap: break-word;"></div>
					</div>
				</div>
			</div>
			
			<div class="not-logged-in mt-3">
				<div class="file-input">
					<input class="clickable" type="file" id="file" onchange="login(this.files)" onclick="this.value=null;">
					<div id="desc">Login using your wallet keyfile.</div>
				</div>
				<div class="mt-3">
					<p style="text-align: center;">
						Need a wallet? Click <a href="https://tokens.arweave.org/" target="_blank">here</a>!
					</p>
				</div>
			</div>				
			
			<div class="logged-in row text-center justify-content-center" style="display: none;">
				<div class="loading-1 spinner-border" role="status" style="display: none;">
					<span class="sr-only">Loading...</span>
				</div>	
				<div class="identicon-creator col-lg-6">
					<div class="row text-center justify-content-center mb-2">
						<div class="col-lg-6 mt-3">
							<img class="img-thumbnail" id="imgIdenticon" width="240px" src="./img/identicon.png">
						</div>
					</div>
					<div id="identicon-options">
						<p class="mb-0">Create your identicon using:</p>
						<div class="form-check form-check-inline">
							<div class="row justify-content-center">
								<label class="mr-3"><input class="form-check-input" type="radio" name="identi" id="optionIdenticon1" value="1" checked>PublicKey</label>
								<label class="mr-3"><input class="arw-id form-check-input" type="radio" name="identi" id="optionIdenticon2" value="2">ArweaveID</label>
								<label class="mr-3"><input class="form-check-input" type="radio" name="identi" id="optionIdenticon3" value="3">Custom text</label>
							</div>
						</div>
						<div class="collapse" id="collapseTwo">
							<div class="input-group-md mb-3">
								<input type="text" id="custom-text" class="form-control" oninput="updateIdenticon();" placeholder="Enter anything you want here.">
							</div>
						</div>						
					</div>
					<button name="button" class="btn btn-primary mb-3" onclick="uploadToArweave();">
						<div id="button-n">Upload to ARweave</div>
						<div id="button-l" style="display: none;">
							<span class="spinner-border spinner-border-sm" role="status"></span>
							Uploading...
						</div>
					</button>
				</div>				
			</div>

			<div class="identitable row text-center justify-content-center" style="display: none;">
				<div class="col-lg-6 text-center">
					<div class="pb-2 mt-4 mb-2 border-top">
						<p><strong>Your Identicons:</strong></p>
						<div class="loading-2 spinner-border" role="status">
						  <span class="sr-only">Loading...</span>
						</div>
						<p></p>
						<table class="table table-borderless table-responsive" id="awesometable"></table>
					</div>
				</div>
			</div>
		</div>		
		<footer>
			created by: inspireme6	-	<a href="https://github.com/inspireme6/arweave-identicons" target="_blank">github</a>
		</footer>
		
		<script src="https://code.jquery.com/jquery-3.4.1.slim.min.js"></script>
		<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"></script>
		<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"></script>
		<script src="js/main.js"></script>
	</body>
</html>